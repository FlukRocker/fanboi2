@import "nib"

/* Reset */
global-reset()
reset-html5()


/* Site colors */
$color-primary = #eb3a17
$color-secondary = #f5f7f8
$color-danger = $color-primary
$color-gray = #5e6b71;
$color-dark = darken($color-gray, 40%)
$color-darker = darken($color-gray, 60%)
$color-light = lighten($color-gray, 30%)
$color-lighter = lighten($color-gray, 50%)
$color-reply = #4ab91f

/* Metrics */
$header-logo-height = 15px
$header-logo-width = 80px
$header-padding = 11px
$header-stripe = 2px
$header-height = $header-logo-height + $header-padding + $header-stripe
$vertical-spacing = 20px
$vertical-spacing-small = $vertical-spacing * 0.8
$horizontal-spacing = 15px
$horizontal-gutter = 20px
$line-height = 140%


/* Body */
body
    background-color #e9e9e9
    font-family "Helvetica", "Arial", sans-serif
    font-size 16px
    height 100%
    min-width: 320px


/* Page header */
#header
    background-color $color-darker
    border-top $header-stripe solid $color-primary
    max-height $header-height
    overflow hidden
    padding $header-padding 0 0

    @media (min-width: 0)
        .brand
            background-image url(../logo.svg)
            background-repeat no-repeat
            background-size $header-logo-width
            height $header-logo-height
            width $header-logo-width

            a
                float left
                height $header-logo
                text-indent -1000em
                width $header-logo-width

    @media (max-width: 639px)
        background-color $color-primary
        border-top 0
        padding-bottom $header-padding + 1px  /* Visually center */
        text-align: center

        .brand
            margin auto


/* Links */
a
    color $color-primary
    text-decoration none

    &:hover
        color #999
        text-decoration none


/* Page footer */
#footer
    color #777
    font-size 14px
    line-height $line-height
    padding $vertical-spacing 0


/* Generic container for wrapping pages. */
.container
    margin auto
    max-width 979px
    padding 0 $horizontal-gutter


/* Generic class for turning a block into inline-block. */
.inline-text
    display inline-block


/* Generic class for button-style links. */
.button
    border 1px solid #fff
    color $color-light
    cursor pointer
    display inline-block
    font-family sans-serif
    font-size 14px
    line-height normal
    margin 0
    outline none
    padding 8px 12px
    text-decoration none

    &:hover
        color #fff


/* Generic class for forms. */
.form
    label
        color $color-light
        font-size 12px
        font-weight bold

    .form-field
        input
        textarea
            appearance none        /* WebKit Mobile. */
            background-color #fff  /* Firefox Desktop. */
            background-image none  /* Firefox Mobile. */
            border 1px solid #d0d0d0
            border-radius 0
            box-sizing border-box
            color #333
            display block
            font-family sans-serif
            font-size 16px
            line-height $line-height
            margin 5px 0
            max-width 100%
            outline none
            padding 5px
            width 100%
            &:focus
                border-color $color-gray

        textarea
            min-height 130px

    .form-error
        label
            color $color-danger

        input[type=text],
        textarea
            border-color $color-danger
            &:focus
                border-color $color-danger

        .error-message
            background-color $color-danger
            color #fff
            display block
            font-size 12px
            line-height $line-height
            margin-top -5px
            margin-bottom 5px
            padding 5px


/* Generic class headers. */
.header
    background-color $color-darker
    line-height $line-height
    padding $header-padding 0

    .button
        border none
        margin-top ($vertical-spacing / 2)

    @media (max-width: 639px)
        text-align center
        padding-top $header-padding * 2

        .button
            padding 7px 8px


/* Generic error block class. */
.item-error
    background-color #fff
    border-bottom 1px solid #ddd
    line-height $line-height
    padding $vertical-spacing 0

    .title
        color $color-primary
        font-size 18px
        font-weight bold

    .description
        color $color-gray
        font-size 14px

    strong
        font-weight bold


/* Root page header (e.g. root view) */
.header-boards
    color #fff
    font-size small
    line-height $line-height
    padding-top 3px

    @media (max-width: 639px)
        background-color $color-primary
        margin-top ($header-padding * -1)
        padding-top 0


/* Container for board listing (e.g. root view) */
.item-board
    background-color #f6f6f4
    border-bottom 1px solid #ddd
    line-height $line-height
    padding $vertical-spacing-small 0

    &:hover
        background-color #fff

    + .item-board
        margin-top -1px
        border-top 1px solid #eee

    .title
        color #666
        font-size 18px
        font-weight bold
        line-height $line-height
        text-decoration none

    .description
        color $color-gray
        font-size small
        line-height $line-height

    @media (max-width: 639px)
        position relative
        padding-right 24px

        .title
            font-size 16px
            line-height $line-height

        a
            &:before
                bottom 0
                content ''
                left 0
                position absolute
                right 0
                top 0
                z-index 1

            &:after
                background-image url(../chevron.svg)
                background-repeat no-repeat
                background-size 14px
                content ''
                height 20px
                margin-top -10px
                opacity 0.5
                position absolute
                right $horizontal-gutter
                top 50%
                width 14px

            &:hover
                &:after
                    opacity 0.3


/* Board header (e.g. board view, topic view) */
.header-board
    padding-bottom $vertical-spacing

    .title
        color #fff
        font-size 22px
        font-weight 800
        text-decoration none

    .description
        color $color-light
        font-size small
        line-height $line-height

    .button-current
        background-color $color-primary
        color #fff


/* Board header (e.g. board view, topic view) */
.subheader-board
    padding $vertical-spacing 0
    background-color $color-secondary

    .title
        @extend .header-board .title
        color $color-primary
        margin-bottom 15px

    ul, ol, p
        line-height $line-height
        margin-top 10px

    ul
        list-style disc
        margin-left 20px

    ol
        list-style number
        margin-left 20px

    .description
        color $color-light
        font-size 14px
        margin-top 15px

    .button-back
        background-color $color-danger
        border-color $color-danger
        color #fff
        margin-top 10px

        &:hover
            background-color #fff
            border-color $color-danger
            color $color-danger


/* Topic item (e.g. board view) */
.item-topic
    background-color #f6f6f4
    border-bottom 1px solid #ddd
    line-height $line-height
    padding $vertical-spacing-small 0

    &:hover
        background-color #fff

    + .item-topic
        margin-top -1px
        border-top 1px solid #eee

    .details
        color $color-light
        font-size small
        line-height $line-height

        strong
            font-weight bold

    @media (max-width: 639px)
        position relative

        a
            padding-right 24px

            &:before
                bottom 0
                content ''
                left 0
                position absolute
                right 0
                top 0
                z-index 1

            &:after
                background-image url(../chevron.svg)
                background-repeat no-repeat
                background-size 14px
                content ''
                height 20px
                margin-top -10px
                opacity 0.5
                position absolute
                right $horizontal-gutter
                top 50%
                width 14px

            &:hover
                &:after
                    opacity 0.3


/* Container for reply section. */
.new-topic
    border-bottom 1px solid #ddd
    background-color #fff
    padding $vertical-spacing-small 0

    input#title
        font-size 20px
        font-weight bold
        line-height $line-height

    .button-post
        background-color $color-gray
        border-color $color-gray
        color #fff
        font-weight bold

        &:hover
        &:focus
            background-color #fff
            border-color $color-gray
            color $color-gray


/* Topic header (e.g. topic view) */
.header-topic
    @extend .header-board

    .button-reply
        background-color $color-reply
        color #fff


/* Posts header a.k.a. "topic" header (e.g. board view) */
.header-posts
    background-color #fff
    padding $vertical-spacing-small 0

    .title
        font-size 18px
        font-weight bold
        text-decoration none
        line-height $line-height

    .details
        color $color-light
        font-size small
        line-height $line-height

        strong
            font-weight bold


/* Container for post listing (e.g. board view, topic view) */
.item-post
    $post-spacing = $vertical-spacing-small

    background-color $color-secondary
    border-top 1px solid #fff
    max-width 100%
    overflow-x auto
    padding ($post-spacing + 5px) 0 $post-spacing

    .item-post-meta
        color $color-light
        font-size 12px
        font-weight bold

    .item-post-number
        background-color #fff
        border 1px solid $color-light
        color $color-light
        padding 3px 5px

        &.item-post-bumped
            background-color $color-light
            border 1px solid $color-light
            color #fff

        &:hover
            background-color $color-gray
            border 1px solid $color-gray
            color #fff

    .item-post-name
        background-color #fff
        padding 5px 6px
        margin-right 3px

    .item-post-ident
        color #aabbc4
        padding 5px 3px

    .item-post-body
        margin-top $post-spacing

        p.thumbnails
            margin-top ($post-spacing / 2)px

    @media (max-width: 639px)
        position relative
        padding-bottom ($post-spacing * 2.5)

        .item-post-date
            bottom $post-spacing
            font-style italic
            font-weight normal
            left $horizontal-gutter
            position absolute


/* Container for post body (e.g. board view, topic view) */
.item-post-body
    color #333
    line-height $line-height
    margin-top -10px

    p
        margin-top 10px

    p.thumbnails
        margin-top -3px

    p.shortened
        font-size small
        font-style italic
        color $color-light

        a
            font-weight bold

    a
        color #0088cc

        &:hover
            color #005580
            text-decoration underline

    a.link
        @extend a

    a.thumbnail
        img
            margin-top 3px
            margin-right 3px

        &:hover
            img
                opacity 0.8

    @media (max-width: 639px)
        p.shortened
            margin-bottom -10px


/* Posts footer a.k.a. "topic" footer (e.g. board view, topic view) */
.footer-posts
    background-color darken($color-secondary, 5%)
    border-bottom 1px solid darken($color-secondary, 10%)
    padding $vertical-spacing-small 0

    .button
        background-color #fff
        border-color rgba($color-lighter, .4)
        color $color-gray

        &:hover
            background-color $color-gray
            border-color $color-gray
            color #fff

    .button-reply
        background-color $color-reply
        border-color darken($color-reply, 10%)
        color #fff
        font-weight bold

        &:hover
            background-color #fff
            border-color $color-reply
            color $color-reply

    .button-reload
        background-color $color-primary
        border-color $color-primary
        color #fff
        font-weight bold

        &:hover
            background-color #fff
            border-color $color-primary
            color $color-primary

    @media (max-width: 639px)
        .button
            display block
            + .button
                margin-top 3px


/* Container for reply section. */
.reply-topic
    @extend .new-topic

    input#bumped
        margin-left 7px
