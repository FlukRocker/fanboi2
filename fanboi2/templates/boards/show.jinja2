{% extends "boards/layout.jinja2" %}

{% block content %}
<div class="board-show">
  {% for topic in topics %}
    <div id="topic-{{ topic.obj.id }}" class="topic">
      <header>
        <div class="container">
          <div class="well">
            <h4><a href="{{ request.resource_url(topic) }}">{{ topic.obj.title }}</a></h4>
            <ul class="unstyled">
              <li class="hidden-phone"><i class="icon-info-sign icon-white"></i> Last posted at {{ topic.obj.posted_at }}</li>
              <li><i class="icon-info-sign icon-white"></i> {{ topic.obj.post_count }} posts</li>
            </ul>
          </div>
        </div>
      </header>
      <div class="posts">
        <div class="container">
          <div class="overlay"></div>
          <ul class="messages unstyled">
            {% for post in topic.objs[-5:] %}
              <li><strong>{{ post.obj.number }}</strong> <i class="icon-chevron-right"></i> {{ post.obj.body|striptags|truncate }}</li>
            {% endfor %}
          </ul>
        </div>
      </div>
      <footer>
        <div class="container">
          <div class="well">
            <ul class="unstyled">
              <li><a href="{{ request.resource_url(topic) }}" class="btn"><i class="icon-th-list"></i> All posts</a></li>
              <li><a href="{{ request.resource_url(topic, "recent") }}" class="btn"><i class="icon-inbox"></i> Recent posts</a></li>
              <li><a href="{{ request.resource_url(topic, "recent") }}#reply" class="btn btn-success"><i class="icon-share-alt icon-white"></i> Reply</a></li>
            </ul>
          </div>
        </div>
      </footer>
    </div>
  {% else %}
    <div class="container">
      <p>No topics, be the first to <a href="{{ request.resource_url(board, "new") }}">post one</a>!</p>
    </div>
  {% endfor %}
</div>
{% endblock %}
